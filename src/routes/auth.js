const express = require('express');\nconst router = express.Router();\nconst prisma = require('../db');\nconst jwt = require('jsonwebtoken');\nconst bcrypt = require('bcryptjs');\nrequire('dotenv').config();\n\n// login\nrouter.post('/login', async (req, res) => {\n  const { email, senha } = req.body;\n  if (!email || !senha) return res.status(400).json({ mensagem: 'Email e senha são obrigatórios' });\n  try {\n    const user = await prisma.usuario.findUnique({ where: { email } });\n    if (!user) return res.status(401).json({ mensagem: 'Credenciais inválidas' });\n    const ok = bcrypt.compareSync(senha, user.senha);\n    if (!ok) return res.status(401).json({ mensagem: 'Credenciais inválidas' });\n    const token = jwt.sign({ usuarioId: user.id, email: user.email, nome: user.nome }, process.env.JWT_SECRET, { expiresIn: '8h' });\n    res.json({ token });\n  } catch (e) {\n    res.status(500).json({ mensagem: 'Erro no login', erro: e.message });\n  }\n});\n\nmodule.exports = router;\n